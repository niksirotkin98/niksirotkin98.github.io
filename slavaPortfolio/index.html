<!DOCTYPE html>
<html>
    <head>
        <title>Cubic</title>
        <link rel="stylesheet" href="./src/css/style.css"/>
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,600;0,700;0,800;1,300;1,400;1,600;1,700;1,800&display=swap" rel="stylesheet">
    </head>
    <body>
        <header class="mainHeader">
            <div class="logo">
                <img src="./src/images/logo.svg">
                <span>Viachas Kul</span>
            </div>
            <div class="links">
                <a class="current">Works</a>
                <a>About</a>
                <a>Contact</a>
            </div>
        </header>
        <main>
            <p class="headline">UX & Interface designer.</p>
            <div>
                <span class="subheadline">Saas & Ecommerce Based</span>
                <img class="logos" src="./src/images/logo-linkedin.svg">
                <img class="logos" src="./src/images/logo-twitter.svg">
                <img class="logos" src="./src/images/logo-behance.svg">
                <img class="logos" src="./src/images/logo-dribbble.svg"> 
            </div>
            <div class="filter">
                <button id="filterButton">
                    <span id="filterButtonTitle">E-Commerce</span>
                    <ul id="filterButtonUl" class="filterList">
                        <li value="li_ecommerce" class="selected">E-Commerce</li>
                        <li value="li_illustration" >Illustration</li>
                        <li value="li_other" >Other</li>
                    </ul>
                    <img src="./src/images/arrow-down.svg">
                </button>
            </div>
            <ol class="grid">
                <li class="item">
                    <img src="./src/images/articles/unnamed_1.png">
                    <div class="hover">
                        <span class="headline">Jewelry Online Store</span>
                        <span class="tags">UI / Visual Design, UX Design</span>
                    </div>
                </li>
                <li class="item">
                    <img src="./src/images/articles/unnamed_1.png">
                    <div class="hover">
                        <span class="headline">Jewelry Online Store</span>
                        <span class="tags">UI / Visual Design, UX Design</span>
                    </div>
                </li>
                <li class="item">
                    <img src="./src/images/articles/unnamed_1.png">
                    <div class="hover">
                        <span class="headline">Jewelry Online Store</span>
                        <span class="tags">UI / Visual Design, UX Design</span>
                    </div>
                </li>
                <li class="item">
                    <img src="./src/images/articles/unnamed_1.png">
                    <div class="hover">
                        <span class="headline">Jewelry Online Store</span>
                        <span class="tags">UI / Visual Design, UX Design</span>
                    </div>
                </li>
                <li class="item">
                    <img src="./src/images/articles/unnamed_1.png">
                    <div class="hover">
                        <span class="headline">Jewelry Online Store</span>
                        <span class="tags">UI / Visual Design, UX Design</span>
                    </div>
                </li>
                <li class="item">
                    <img src="./src/images/articles/unnamed_1.png">
                    <div class="hover">
                        <span class="headline">Jewelry Online Store</span>
                        <span class="tags">UI / Visual Design, UX Design</span>
                    </div>
                </li>
                <li class="item">
                    <img src="./src/images/articles/unnamed_1.png">
                    <div class="hover">
                        <span class="headline">Jewelry Online Store</span>
                        <span class="tags">UI / Visual Design, UX Design</span>
                    </div>
                </li>
                <li class="item">
                    <img src="./src/images/articles/unnamed_1.png">
                    <div class="hover">
                        <span class="headline">Jewelry Online Store</span>
                        <span class="tags">UI / Visual Design, UX Design</span>
                    </div>
                </li>
                <li class="item">
                    <img src="./src/images/articles/unnamed_1.png">
                    <div class="hover">
                        <span class="headline">Jewelry Online Store</span>
                        <span class="tags">UI / Visual Design, UX Design</span>
                    </div>
                </li>
                <li class="item">
                    <img src="./src/images/articles/unnamed_1.png">
                    <div class="hover">
                        <span class="headline">Jewelry Online Store</span>
                        <span class="tags">UI / Visual Design, UX Design</span>
                    </div>
                </li>
                <li class="item">
                    <img src="./src/images/articles/unnamed_1.png">
                    <div class="hover">
                        <span class="headline">Jewelry Online Store</span>
                        <span class="tags">UI / Visual Design, UX Design</span>
                    </div>
                </li>
            </ol>
            <div class="backToTop" onclick="window.scrollTo(0,0)">
                <span>↑ Back to Top</span>
            </div>
        </main>
        <footer class="footer">
            <span>© 2020 All rights reserved</span>
            <span>Made with <b style="color:red">♥</b></span>
        </footer>
    </body>
    <script>
        async function checkJSON(){
            let response = await fetch("./structure.json");
            if(response.ok){
                let json = await response.json();
                console.log(json);
            } else {
                console.log("Ошибка:" + response.status);
            }
        }
        checkJSON();

        function openFilter(e){
            filterButtonUl.classList.add("opened");
            filterButton.classList.add("openedFilter");
            e.stopPropagation();
            window.addEventListener("click", ()=>{
                filterButtonUl.classList.remove("opened");
                filterButton.classList.remove("openedFilter");
            }, {once : true});
        }

        function changeFilter(target, filterName){
            window.history.replaceState({},"Cubic",`/?filter=${target.getAttribute("value").replace("li_","")}`);
            filterButtonTitle.innerText = filterName;
            filterButtonUl.querySelector("li.selected").classList.remove("selected");
            target.classList.add("selected");
        }
      
        function onChangeFilter(e){
            changeFilter(e.target, e.target.innerText);
            filterButtonUl.classList.remove("opened");
            filterButton.classList.remove("openedFilter");
            e.stopPropagation();
        }

      
        filterButton.addEventListener("click", openFilter, false);
        for(let i=0; i<filterButtonUl.children.length; i++)
            filterButtonUl.children[i].addEventListener("click", onChangeFilter, false);

        function refresh(){
            let searchParams = new URLSearchParams(window.location.search);
            if(searchParams.has("filter")){
              let filter = "ecommerce"
              switch(searchParams.get("filter")){
                case "ecommerce": filter = "ecommerce"; break;
                case "illustration": filter = "illustration"; break;
                case "other": filter = "other"; break;
              }
              filter = document.querySelector(`li[value=li_${filter}]`);
              changeFilter(filter, filter.innerText);
            }
        }
      

        refresh();
    </script>
</html>